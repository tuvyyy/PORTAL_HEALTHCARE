<!-- N·ªôi dung b√™n trong layout chung -->
<div class="container">
  <h3 class="text-primary mb-4 text-center">üíä Danh s√°ch toa thu·ªëc c·ªßa t√¥i</h3>

  <% if (!prescriptions || prescriptions.length === 0) { %>
    <div class="alert alert-warning text-center shadow-sm">
      <b>Ch∆∞a c√≥ toa thu·ªëc n√†o ƒë∆∞·ª£c ho√†n t·∫•t.</b>
    </div>
  <% } else { %>
    <table class="table table-bordered table-striped bg-white shadow-sm align-middle">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>B√°c sƒ© k√™ toa</th>
          <th>Ch·∫©n ƒëo√°n</th>
          <th>Ng√†y k√™</th>
          <th>Tr·∫°ng th√°i</th>
          <th class="text-center">Thao t√°c</th>
        </tr>
      </thead>
      <tbody>
        <% prescriptions.forEach((p, i) => { %>
          <tr>
            <td><%= i + 1 %></td>
            <td><%= p.DoctorName %></td>
            <td><%= p.Diagnosis || '‚Äî' %></td>
            <td><%= p.CreatedAt ? new Date(p.CreatedAt).toISOString().split('T')[0] : '' %></td>
            <td>
              <% if (p.Status === 'done') { %>
                <span class="badge bg-success">Ho√†n t·∫•t</span>
              <% } else { %>
                <span class="badge bg-warning text-dark">ƒêang ch·ªù</span>
              <% } %>
            </td>
            <td class="text-center">
              <a href="/patient/prescriptions/<%= p.PrescriptionId %>" 
                 class="btn btn-sm btn-outline-primary">
                üëÅÔ∏è Xem toa
              </a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</div>
